<!DOCTYPE html>
<html>
<head>
<title>Highlighted Code</title>
</head>
<body>
<div><h2>Gu√≠a de Colores</h2><ul><li><span style="color: red;">Error</span></li><li><span style="color: blue;">Numbers</span></li><li><span style="color: orange;">Operators</span></li><li><span style="color: navy;">Variables</span></li><li><span style="color: olive;">Functions</span></li><li><span style="color: purple;">Reserved</span></li><li><span style="color: green;">String</span></li><li><span style="color: silver;">Comments</span></li><li><span style="color: brown;">Keys_brackets_punctuation</span></li><li><span style="color: black;">Format</span></li></ul></div><hr><pre>
<span style="color: silver;"># Disable type checking for this module since numba's internals</span><br><span style="color: silver;"># are not typed, and we use numba's internals via its extension API</span><br><span style="color: silver;"># mypy: ignore-errors</span><br><span style="color: green;">""</span><span style="color: green;">"
Utility classes/functions to let numba recognize
pandas Index/Series/DataFrame

Mostly vendored from https://github.com/numba/numba/blob/main/numba/tests/pdlike_usecase.py
"</span><span style="color: green;">""</span><br><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">__future__</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">annotations</span><br><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">contextlib</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">contextmanager</span><br><span style="color: purple;">import</span>&nbsp;<span style="color: navy;">operator</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">typing</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">TYPE_CHECKING</span><br><br><span style="color: purple;">import</span>&nbsp;<span style="color: navy;">numba</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">numba</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">types</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">numba</span><span style="color: brown;">.</span><span style="color: navy;">core</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">cgutils</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">numba</span><span style="color: brown;">.</span><span style="color: navy;">core</span><span style="color: brown;">.</span><span style="color: navy;">datamodel</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">models</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">numba</span><span style="color: brown;">.</span><span style="color: navy;">core</span><span style="color: brown;">.</span><span style="color: navy;">extending</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: brown;">(</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">NativeValue</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">box</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">lower_builtin</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">make_attribute_wrapper</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">overload</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">overload_attribute</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">overload_method</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">register_model</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">type_callable</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">typeof_impl</span><span style="color: brown;">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: navy;">unbox</span><span style="color: brown;">,</span><br><span style="color: brown;">)</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">numba</span><span style="color: brown;">.</span><span style="color: navy;">core</span><span style="color: brown;">.</span><span style="color: navy;">imputils</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">impl_ret_borrowed</span><br><span style="color: purple;">import</span>&nbsp;<span style="color: navy;">numpy</span>&nbsp;<span style="color: purple;">as</span>&nbsp;<span style="color: navy;">np</span><br><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">pandas</span><span style="color: brown;">.</span><span style="color: navy;">_libs</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">lib</span><br><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">pandas</span><span style="color: brown;">.</span><span style="color: navy;">core</span><span style="color: brown;">.</span><span style="color: navy;">indexes</span><span style="color: brown;">.</span><span style="color: navy;">base</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">Index</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">pandas</span><span style="color: brown;">.</span><span style="color: navy;">core</span><span style="color: brown;">.</span><span style="color: navy;">indexing</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">_iLocIndexer</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">pandas</span><span style="color: brown;">.</span><span style="color: navy;">core</span><span style="color: brown;">.</span><span style="color: navy;">internals</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">SingleBlockManager</span><br><span style="color: purple;">from</span>&nbsp;<span style="color: navy;">pandas</span><span style="color: brown;">.</span><span style="color: navy;">core</span><span style="color: brown;">.</span><span style="color: navy;">series</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">Series</span><br><br><span style="color: purple;">if</span>&nbsp;<span style="color: navy;">TYPE_CHECKING</span><span style="color: brown;">:</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: purple;">from</span>&nbsp;<span style="color: navy;">pandas</span><span style="color: brown;">.</span><span style="color: navy;">_typing</span>&nbsp;<span style="color: purple;">import</span>&nbsp;<span style="color: navy;">Self</span><br><br><br><span style="color: silver;"># Helper function to hack around fact that Index casts numpy string dtype to object</span><br><span style="color: silver;">#</span><br><span style="color: silver;"># Idea is to set an attribute on a Index called _numba_data</span><br><span style="color: silver;"># that is the original data, or the object data casted to numpy string dtype,</span><br><span style="color: silver;"># with a context manager that is unset afterwards</span><br>
</pre></body>
</html>